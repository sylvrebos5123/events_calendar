<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">


	<link href='../fullcalendar.css' rel='stylesheet' />
	<link href='../fullcalendar.print.css' rel='stylesheet' media='print' />
	<script src='../lib/moment.min.js'></script>
	<script src='../lib/jquery.min.js'></script>
	<script src='../fullcalendar.min.js'></script>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <style type="text/css">
  
	body {
		margin: 40px 10px;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}
	
    #calendar {
		max-width: 900px;
		margin: 0 auto;
	}


  </style>

  <title>Bootstrap and Fullcalendar by SV</title>


<script type='text/javascript'>//<![CDATA[
$(window).load(function(){
$(document).ready(function() {

      //var calendar = $('#calendar').fullCalendar({
	 $('#calendar').fullCalendar({
      defaultView: 'agendaWeek',
         timezone: 'UTC',

         editable: false,
        selectable: true,
		events: {

		url: 'php/file_test.php',
			error: function() {
				$('#script-warning').show();
			}
		},
      //header and other values
      select: function(start, end, allDay) {

		starttime=moment(start).format('YYYY-MM-DDTHH:mm:ss'); 
        endtime=moment(end).format('YYYY-MM-DDTHH:mm:ss'); 
          var mywhen = starttime + ' - ' + endtime;
          var split_starttime=starttime.split('T');
		  alert(split_starttime[0]+' - '+split_starttime[1]);
          var split_endtime=endtime.split('T');
          alert(split_endtime[0]+' - '+split_endtime[1]);

          var split_starttime=starttime.split('T');

          $('#createEventModal #apptStartTime').val(start);
          //$('#createEventModal #apptEndTime').val('2016-03-09T11:00:00');
          $('#createEventModal #start_date').val(split_starttime[0]);
          $('#createEventModal #start_time').val(split_starttime[1]);
          $('#createEventModal #apptEndTime').val(end);
          $('#createEventModal #apptAllDay').val(allDay);
          $('#createEventModal #when').text(mywhen);
          $('#createEventModal').modal('show');
       }
    });

  $('#submitButton').on('click', function(e){
    // We don't want this to act as a link so cancel the link action
    e.preventDefault();

    doSubmit();
  });

  function doSubmit(){
    $("#createEventModal").modal('hide');
    console.log($('#apptStartTime').val());
    console.log($('#apptEndTime').val());
    console.log($('#apptAllDay').val());
    //alert("form submitted");
        
    $("#calendar").fullCalendar('renderEvent',
        {
            title: $('#patientName').val(),
            start: new Date($('#apptStartTime').val()),
            end: new Date($('#apptEndTime').val()),
            allDay: ($('#apptAllDay').val() == "true"),
        },
        true);
   }
});
});//]]> 

</script>

  
</head>

<body>
  <div id="calendar"></div>

  
<div class="modal fade" id="createEventModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Create Event</h4>
        </div>
        <div class="modal-body">
          <!-- form -->
		  <form id="createAppointmentForm" class="form-horizontal">
			<div class="form-group row">
				<label class="col-sm-2" for="inputPatient">Subject:</label>
				<div class="col-sm-10">
					<input type="text" name="patientName" id="patientName" class="form-control">
					  <input type="hidden" id="apptStartTime"/>
					  <input type="hidden" id="apptEndTime"/>
					  <input type="hidden" id="apptAllDay" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2" for="when">When:</label>
				<div class="col-sm-10" id="when">
				</div>
                <input type="date" id="start_date" name="start_date" class="form-control">
                <input type="time" id="start_time" name="start_time" class="form-control">
			</div>
		</form>
		 <!-- form -->
        </div>
        <div class="modal-footer">
		  <button class="btn btn-default" data-dismiss="modal" >Cancel</button>
          <button type="submit" class="btn btn-primary" id="submitButton">Save</button>
        </div>
      </div>
    </div>
</div>
 

  

  
</body>

</html>

